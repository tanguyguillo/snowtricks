{% extends 'base.html.twig' %}

{% set route = '' %}
{% set routeTitre = '' %}
{% set route = app.request.attributes.get('_route') %}

{% if route == 'tricks_details' %}
{% set routeTitre = 'Trick details' %}
{% endif %}

{% if route == 'tricks_modifications' %}
{% set routeTitre = 'modifications' %}
{% endif %}

{# titre #}
{% block title %}
Snowtricks - {{ routeTitre }} - {{ trick.title }}
{% endblock %}

{% block main %}
<br><br><br>
<div class="container text-center">
    <br>
    <br>
    <br>

    {#
    <pre>
        {{ app.request.attributes.get('_route') }}
        {{ route }}
    </pre> #}

    <span class="badge bg-primary">Snowtricks - {{ routeTitre }} </span>

    <div class="row justify-content-center" id="#tricks">
        <div class="col-lg-12">
            <div class="modifications">
                <div class="rounded shadow p-3 mb-5 bg-white">

                    {# main picture icone modification#}
                    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') and app.request.attributes.get('_route') ==
                    "tricks_modifications" %}

                    {# {{ form_start(formUpdateTrick, {'attr': {'novalidate': 'novalidate'}}) }} #}

                    {{ form_start(formUpdateTrick) }}


                    <div>
                        {{ form_row(formUpdateTrick.content, {
                        label: 'Modify the description of this trick',
                        attr : {'class': 'form-control'}
                        }) }}
                    </div>

                    <div class="col-2 float-right ml-1">

                        <button class="btn btn-info updateTrick" type="submit">Save</button>

                        {# {{ include('tricks/_form.html.twig', {'button_label': 'Update'}) }} #}

                        {# {{ form_row(form.submit, { 'label': 'Submit me' }) }} #}

                    </div>

                    {{ form_end(formUpdateTrick) }}

                    <div class="col-2 float-right ml-1">
                        <form method="post"
                            action="{{ path('tricks_app_tricks_delete_from_detail', {'id': trick.id}) }}"
                            onsubmit="return confirm('Are you sure you want to delete this trick?');">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ trick.id) }}">
                            <button class="btn btn-danger">Delete</button>
                        </form>
                    </div>



                </div>
            </div>


            <br>
            <br>
            <br>
            <br>

            {% endif %}

        </div>

    </div>

    {# comments #}
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="comments">
                    <div class="avatar-commentcol-lg-2">
                        <img src="assets/img/avatars/avatar-252Ã—230.png" height="100px" />
                    </div>
                    <div class="comment-text col-lg-10">
                        <p>Verni domesticus quam animi filius suspensus ut quae potuit magistro
                            discerpti turbela
                            translationem timore egerat futurorum quondam imbres emendabat referente
                            quam rettulimus
                            crebriores angorem diu diu timore referente crebriores Constantinopolim
                            suspensus emendabat
                            timore supra Herculanus auctique diu diu egerat emendabat.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <br>
    <br>
    <br>
    <br>


    <div id="overlay"></div>

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    {% endblock %}