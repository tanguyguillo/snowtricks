{% extends 'base.html.twig' %}

{% block title %}
SnowTricks - Trick detail - {{ trick.title }}
{% endblock %}

{% block main %}
<br><br><br>
<div class="container text-center">
    <br>
    <br>
    <br>

    <span class="badge bg-primary">SnowTricks - Trick details </span>

    <div class="row justify-content-center" id="#tricks">
        <div class="col-lg-12">
            <div class="modifications">
                <div class="rounded shadow p-3 mb-5 bg-white">

                    <img class="bd-placeholder-img bd-placeholder-img-lg img-fluid " width="100%" height="150"
                        src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/{{ trick.picture }}"
                        alt="{{ trick.title }}">

                    <div class="caption post-content">
                        <h1>{{ trick.title }}
                        </h1>
                    </div>
                </div>

                {####### more pictures #########}

                <div class="row justify-content-center">
                    {% for additionalPicture in additionalPictures %}
                    <div class="col-md-2 col-lg-2 mb-5 item">
                        <div class="mx-auto">
                            <div class="d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="card {{additionalPicture.id}}">
                                    <img class="img-fluid"
                                        src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/{{ additionalPicture.picture }}"
                                        alt="additional picture of {{ trick.title|striptags}}" />
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}

                    <br>

                    {####### additional video #########}

                    <div class="col-sm-2">
                        <div class="mx-auto">
                            <div class="d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="card image-popup-vertical-fit">
                                    <img class="img-fluid zoom"
                                        src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/main-video.png"
                                        alt="additional video {{ trick.title|striptags}} 1" />
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                {######### description ##########}

                <div class="text-left content text-white">
                    {{ trick.content|striptags }}
                </div>

                {####### information #########}

                <div class="card-body">
                    <ul class="list-inline">
                        <li class="list-inline-item badge bg-primary">
                            Created by : {{ trick.user.username|striptags }}
                        </li class="list-inline-item"> |
                        <li class="list-inline-item badge bg-primary">
                            Created at : {{ trick.createdAt|date('d-m-Y') }}
                        </li> |
                        {% if trick.modifiedAt != null %}
                        <li class="list-inline-item badge bg-primary">
                            Updated : {{ trick.modifiedAt|date('d-m-Y') }}
                        </li> |
                        {% endif %}
                        <li class="list-inline-item badge bg-primary">
                            Groupe : {{ trick.category|striptags }}
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <hr>

    {# comments #}

    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
    <div class="center">
        <div class="media">
            <div class="media-body">
                <div class="row text-left  text-white">
                    <div class="row align-items-start">
                        <div class="row">
                            <div class="col">

                                {{ form_start(formComment) }}
                                <div class="my-custom-class-for-errors">
                                    {{ form_errors(formComment) }}
                                </div>

                                <input type="hidden" name="_token" value="{{ csrf_token('comment-item') }}" />

                                <div class="form-group">
                                    {{ form_row(formComment.content, {
                                    label: false,
                                    attr : {'class': 'form-control'}
                                    }) }}
                                </div>

                            </div>
                            <div class=" col posFctText">
                                <button type="submit" class="btn btn-info mb-2">Leave a comment</button>
                            </div>

                            {{ form_end(formComment) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        {% endif %}

        {# currentComments #}

        <div class="">
            {% for currentComment in currentComments %}
            {# for this tricks #}
            <div class="media">
                {# for a future moderation #}
                {% if currentComment.active == 1 %}
                <img class="mr-3 rounded-circle" alt=""
                    src=" {{ app.request.getSchemeAndHttpHost()}}/assets/img/avatars/avatar-252Ã—230.png" /></a>
                <div class="media-body">
                    <div class="row text-left contentGrey text-white">
                        <div class="col-12 d-flex">
                            {# not the good name if not completed named : now ok <br> #}
                            <h5>
                                {% if currentComment.user.firstName() != null %}
                                {{ currentComment.user.firstName() }}
                                {{currentComment.user.lastName() }}
                                {% else %}
                                {# if first and last name not given #}
                                created by : {{ currentComment.user.username|striptags }}
                                {% endif %}
                            </h5>
                            <span>&nbsp; - created : {{ currentComment.createdAt|date('d-m-Y') }} </span>
                        </div>
                        <div class="col-8 d-flex">
                            {{ currentComment.content }}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>

    </div>


</div>

<br>
<br>
<br>
<br>

<!-- tricks Zoom -->
<div id="overlay" class="zoom"></div>

<br>
<br>
<br>
<br>
{% endblock %}