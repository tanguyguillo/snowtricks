{% extends 'base.html.twig' %}

{# {{ app.request.getSchemeAndHttpHost()}} #}
{% block title %}
SnowTricks - modifications - {{ trick.title }}
{% endblock %}

{% block main %}
<br><br><br>
<div class="container text-center">
    <br>
    <br>
    <br>
    <span class="badge bg-primary">SnowTricks - update </span>
    <div class="row justify-content-center" id="#tricks">
        <div class="col-lg-12">
            <div class="modifications">
                <div class="rounded shadow p-3 mb-5 bg-white">

                    {{ form_start(formUpdateTrick) }}

                    <div class="my-custom-class-for-errors">
                        {{ form_errors(formUpdateTrick) }}
                    </div>

                    {# trick name modification modification formDisplayNone#}

                    <div class="card container text-center collapse" id="collapseMain">
                        <br>
                        <div class="form-group">
                            {{ form_row(formUpdateTrick.picture, {
                            label: "Change this main picture's trick",
                            type : "file",
                            attr : {'class': 'form-control'},
                            }) }}
                        </div>

                        <div class="form-group">
                            {{ form_row(formUpdateTrick.title, {
                            label: 'Change this Trick name',
                            attr : {'class': 'form-control'}
                            }) }}
                        </div>
                    </div>

                    <a data-main-delete
                        href="{{ app.request.getSchemeAndHttpHost() }}/tricks/delete-main-picture-only/{{ trick.id }}"
                        class="float-right ml-1 mainPictureDelete" id="-{{trick.id }}"
                        data-token="{{ csrf_token('delete'~trick.id)}}">
                        <i class="bi bi-trash-fill iconTricks"></i>
                    </a>


                    <a data-bs-toggle="collapse" href="#collapseMain" class="float-right ml-1 collapseMain"
                        alt="update trick">
                        <i class="bi bi-pencil-fill iconTricks"></i>
                    </a>

                    <br>
                    <div class="col-lg-12">
                        <div class="text-white bg-Light mb-3">
                            <div class="rounded shadow p-3 mb-5 bg-white embedPicture">
                                <img class="bd-placeholder-img bd-placeholder-img-lg img-fluid mainPicture  empty"
                                    width="100%" height="150"
                                    src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/{{ trick.picture }}"
                                    alt="Category : {{trick.category}} - trick : {{trick.title }}">


                                <div class="caption post-content">
                                    <h1><span class="grey">{{ trick.title }}</span>
                                    </h1>
                                </div>

                            </div>


                        </div>
                    </div>

                    {# <div class="form-control">
                        <i class="fa fa-calendar"></i> {{ form_label(form.dueDate) }}
                        {{ form_widget(form.dueDate) }}

                        <small>{{ form_help(formUpdateTrick.title) }}</small>

                        <div class="form-error">
                            {{ form_errors(formUpdateTrick.title) }}
                        </div>
                    </div> #}


                    {####### more pictures #########}
                    <br>

                    <div class="row justify-content-center">
                        {% for additionalPicture in additionalPictures %}
                        <div class="col-md-2 col-lg-2 mb-5 item">

                            <div class="card container text-center collapse" {# collapse #}
                                id="additionalPictures_{{additionalPicture.id}}">
                                <br>

                                <div class="form-group">
                                    {# form_start()
                                    {{ form_row(formUpdateTrick.addAdditionalPicture, {
                                    label: 'Change additional picture',
                                    attr : {'class': 'form-control'}
                                    }) }}
                                    {{ form_end() }} #}

                                    {# <div class="input-group mb-3">
                                        <input type="file" class="form-control" id="inputGroupFile02">
                                        <label class="input-group-text" for="inputGroupFile02">Upload</label>
                                    </div> #}

                                    {# <form name="upload" method="POST" action="upload.php"
                                        enctype="multipart/form-data">
                                        <span class="input-group-text" id="inputGroup-sizing-sm">Small</span>
                                        <input type="file" name="file" id="file" />
                                        <input type="submit" value="OK" />
                                    </form> #}

                                    {# <form action="#">
                                        <p class="file">
                                            <input type="file" name="file" id="file" />
                                            <label for="file"></label>
                                        </p>
                                    </form> #}

                                    {# {{ form_row(formUpdateTrick.pictures, {
                                    label: "Change this additional picture",
                                    type : "file",
                                    attr : {'class': 'form-control'},
                                    }) }} #}

                                </div>
                            </div>


                            <div class="mx-auto general{{ additionalPicture.id }}">
                                <div class="d-flex align-items-center justify-content-center h-100 w-100">
                                    <div class="card {{additionalPicture.id}}">
                                        <img class="img-fluid"
                                            src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/{{ additionalPicture.picture }}"
                                            alt="additional picture of {{ trick.title|striptags}}" />
                                    </div>
                                </div>
                                <span>

                                    <a data-bs-toggle="collapse" href="#additionalPictures_{{additionalPicture.id}}"
                                        class="float-center ml-1 additionalPictureModify{{ additionalPicture.id }}"
                                        id="{{ additionalPicture.id }}">
                                        <i class=" bi bi-pencil-fill iconTricks"></i>
                                    </a>

                                    <a data-additional-delete
                                        href="{{ app.request.getSchemeAndHttpHost() }}/tricks/delete-additional-picture/{{ additionalPicture.id }}"
                                        class="float-center ml-1 btnAdditionalDelete" id="{{ additionalPicture.id }}"
                                        data-token="{{ csrf_token('delete'~additionalPicture.id )}}">
                                        <i class="bi bi-trash-fill iconTricks"></i>
                                    </a>

                                </span>
                            </div>
                        </div>
                        {% endfor %}
                        <div class="col-sm-2">
                            <div class="mx-auto">
                                <div class="d-flex align-items-center justify-content-center h-100 w-100">
                                    <div class="card image-popup-vertical-fit">
                                        <img class="img-fluid zoom"
                                            src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/main-video.png"
                                            alt="additional video {{ trick.title|striptags}} 1" />
                                    </div>
                                </div>
                                <span>
                                    <div>
                                    </div>
                                    <a href="/tricks/modification/{{ trick.slug }}" class="float-center ml-1">
                                        <i class="bi bi-pencil-fill iconTricks"></i>
                                    </a>
                                    <a href="#tricksDelete" class="float-center ml-1">
                                        <i class="bi bi-trash-fill iconTricks"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div>
                        {{ form_row(formUpdateTrick.pictures, {
                        label: 'Add more additional pictures',
                        attr : {'class': 'form-control'}
                        }) }}
                    </div>
                    <br>
                    <ul class="list-inline">
                        <li class="list-inline-item badge bg-primary">
                            Created by : {{ Author.username }}
                        </li class="list-inline-item"> |
                        <li class="list-inline-item badge bg-primary">
                            Created at : {{ trick.createdAt|date('d-m-Y') }}
                        </li> |
                        {% if trick.modifiedAt != null %}
                        <li class="list-inline-item badge bg-primary">
                            Updated at : {{ trick.modifiedAt|date('d-m-Y') }}
                        </li> |
                        {% endif %}
                        <li class="list-inline-item badge bg-primary">
                            Groupe : {{ trick.category }}
                        </li>
                    </ul>
                    <input type="hidden" name="_token" value="{{ csrf_token('update' ~ trick.id) }}">
                    <br>
                    {{ form_row(formUpdateTrick.content, {
                    label: 'Comments',
                    attr : {'class': 'form-control'}
                    }) }}
                    <div class="container text-center">
                        <div class="col-4">
                            {{ form_row(formUpdateTrick.category, {
                            label: 'Groups',
                            attr : {'class': 'form-control'}
                            }) }}
                        </div>
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="submit" class="btn btn-info updateTrick">Save</button>
                            {{ form_end(formUpdateTrick) }}
                            <form method="post"
                                action="{{ path('tricks_app_tricks_delete_from_detail', {'id': trick.id}) }}"
                                onsubmit="return confirm('Are you sure you want to delete this trick?');">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ trick.id) }}">
                                <button class="btn btn-danger">Delete</button>
                            </form>
                        </div>
                        {# <div class="col posfctText">
                            <button type="submit" class="btn btn-info mb-2"><a class="white"
                                    href="{{ path('app_home') }}">Back to
                                    list</a></button>
                        </div> #}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br>
<br>
<div id="overlay"></div>
<br>
<br>
<br>
{% endblock %}