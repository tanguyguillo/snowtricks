{% extends 'base.html.twig' %}

{# titre #}
{% block title %}
Snowtricks - mofifications - {{ trick.title }}
{% endblock %}

{% block main %}
<br><br><br>
<div class="container text-center">
    <br>
    <br>
    <br>
    <span class="badge bg-primary">Snowtricks - update </span>
    <div class="row justify-content-center" id="#tricks">
        <div class="col-lg-12">
            <div class="modifications">
                <div class="rounded shadow p-3 mb-5 bg-white">
                    <a href="#tricksDelete" class="float-right ml-1 tricksDelete">
                        <i class="bi bi-trash-fill iconTricks"></i>
                    </a>
                    <a href="#" class="float-right ml-1" alt="update trick">
                        <i class="bi bi-pencil-fill iconTricks"></i>
                    </a>
                    <br>

                    {# main picture #}
                    <div class="col-lg-12">
                        <div class="card text-white bg-Light mb-3">
                            <div class="rounded shadow p-3 mb-5 bg-white">
                                <img class="bd-placeholder-img bd-placeholder-img-lg img-fluid " width="100%"
                                    height="150"
                                    src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/{{ trick.picture }}"
                                    alt="{{ trick.title }}">
                                <div class="caption post-content">
                                    <h1><span class="grey">{{ trick.title }}</span>
                                    </h1>
                                </div>
                            </div>

                            {{ form_start(formUpdateTrick) }}

                            {# trick name modification modification formDisplayNone#}

                            <div class="container text-center ">
                                <div class="form-group">
                                    {{ form_row(formUpdateTrick.picture, {
                                    label: "Change this main picture's trick",
                                    type : "file",
                                    attr : {'class': 'form-control'},
                                    }) }}
                                    <div class="form-group">
                                        {{ form_row(formUpdateTrick.title, {
                                        label: "Update this main trick's name",
                                        attr : {'class': 'form-control smallForForm'}
                                        }) }}
                                    </div>
                                </div>
                                <br>
                            </div>




                            {####### additionnals pictures #########}
                            <div class="row justify-content-center">
                                {% for additionnalPicture in additionnalPictures %}
                                <!-- additionnalPictures Items-->
                                <div class="col-md-2 col-lg-2 mb-5 item">
                                    <div class="mx-auto">
                                        <div class="d-flex align-items-center justify-content-center h-100 w-100">
                                            <div class="card {{additionnalPicture.id}}">
                                                <img class="img-fluid"
                                                    src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/{{ additionnalPicture.picture }}"
                                                    alt="additional picture of {{ trick.title|striptags}}" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}

                                <br>

                                {####### additionnal video #########}
                                <div class="col-sm-2">
                                    <div class="mx-auto">
                                        <div class="d-flex align-items-center justify-content-center h-100 w-100">
                                            <div class="card image-popup-vertical-fit">
                                                <img class="img-fluid zoom"
                                                    src="{{ app.request.getSchemeAndHttpHost()}}/assets/img/tricks/main-video.png"
                                                    alt="Additionnal video {{ trick.title|striptags}} 1" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {# additionnal picture #}

                            {{ form_row(formUpdateTrick.pictures, {
                            label: 'Add more additionnal pictures',
                            attr : {'class': 'form-control'}
                            }) }}

                            {# infos #}

                            <ul class="list-inline">
                                <li class="list-inline-item badge bg-primary">
                                    Created by : {{ Author.username }}
                                </li class="list-inline-item"> |
                                <li class="list-inline-item badge bg-primary">
                                    Created at : {{ trick.createdAt|date('d-m-Y') }}
                                </li> |
                                {% if trick.modifiedAt != null %}
                                <li class="list-inline-item badge bg-primary">
                                    Updated at : {{ trick.modifiedAt|date('d-m-Y') }}
                                </li> |
                                {% endif %}
                                <li class="list-inline-item badge bg-primary">
                                    Groupe : {{ trick.category }}
                                </li>
                            </ul>

                            <input type="hidden" name="_token" value="{{ csrf_token('update' ~ trick.id) }}">
                            {{ form_row(formUpdateTrick.content, {
                            label: ' ',
                            attr : {'class': 'form-control'}
                            }) }}
                        </div>{# end of <div class="card-body"></div> #}


                        {# group/category #}
                        <div class="container text-center">
                            <div class="row">
                                <div class="col-4">
                                    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') and
                                    app.request.attributes.get('_route') == "tricks_modifications" %}
                                    {{ form_row(formUpdateTrick.category, {
                                    label: 'Groups',
                                    attr : {'class': 'form-control'}
                                    }) }}
                                    {% endif %}
                                </div>
                            </div>

                            {# submit #}
                            <div class="col-2 float-right ml-1">
                                <button class="btn btn-info updateTrick" type="submit">Save</button>
                            </div>
                            {{ form_end(formUpdateTrick) }}

                            <div class="col-2 float-right ml-1">
                                <form method="post"
                                    action="{{ path('tricks_app_tricks_delete_from_detail', {'id': trick.id}) }}"
                                    onsubmit="return confirm('Are you sure you want to delete this trick?');">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ trick.id) }}">
                                    <button class="btn btn-danger">Delete</button>
                                </form>
                            </div>



                        </div>
                    </div>



                    <br>
                    <br>
                    <br>
                    <br>
                    <div id="overlay"></div>


                    <br>
                    <br>
                    <br>
                    {% endblock %}